# å‹‰å¼·è³ªå•ã‚¢ãƒ—ãƒªä½œæˆ(1æ—¥ç›®)

# ä»Šå›ä½œæˆã™ã‚‹Webã‚¢ãƒ—ãƒª **SIRISA** ã®æ¦‚è¦
- å‹‰å¼·ã®è§£æ³•ã‚„ç–‘å•ç‚¹ã‚’äººé–“ã‚„AIãŒå›ç­”ã™ã‚‹ã‚¢ãƒ—ãƒª
- Gemini APIã‚’åˆ©ç”¨ã—ãŸAIå›ç­”
- å›ç­”ã¯ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã ã‘ã§ã¯ãªãã€HTMLã‚„markdownå½¢å¼ã‚’ä½¿ç”¨ã—ãŸå½¢å¼ã‚‚ã‚µãƒãƒ¼ãƒˆ

| å¾“æ¥ã®ã‚¢ãƒ—ãƒª vs SIRISA | ç‰¹å¾´ |
|:-----------|:------------|
| å¾“æ¥ã®è³ªå•å›ç­”ã‚¢ãƒ—ãƒª       | æ¬²ã—ã„æƒ…å ±ã‚’çŸ­ã„æ–‡ç« ã§æä¾› |
| SIRISA       | è§£æ³•ã®éç¨‹ã‚’HTMLã‚„markdownå½¢å¼ã§ã˜ã£ãã‚Šã¨èª¬æ˜ |

:::message
SIRISAã¯ã€inputã®å­¦ç¿’ã«ãŠã„ã¦é‡è¦ãªå­¦ç¿’éç¨‹ã‚’é‡è¦è¦–ã—ãŸWebã‚¢ãƒ—ãƒª
:::

# ä»Šæ—¥ã®æµã‚Œ
1. ã‚µãƒ¼ãƒã®æ§‹ç¯‰æ–¹æ³•ã‚’æ¤œè¨
2. ã‚µãƒ¼ãƒæ§‹ç¯‰
3. è¦ä»¶å®šç¾©
4. ã‚¢ãƒ—ãƒªæ§‹ç¯‰
5. ãƒ†ã‚¹ãƒˆ

# 1.ã‚µãƒ¼ãƒã®æ§‹ç¯‰æ–¹æ³•ã®æ¤œè¨

## OSã®é¸æŠ
-> **Ubuntu 24.04 LTS** 
- Gemini APIã¯ã€Pythonã®åˆ©ç”¨ãŒæ¨å¥¨
  - å„ç¨®Pythonã®Webãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒLinuxã§ã®å‹•ä½œã‚’å‰æã¨ã—ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ãŸã‚

## ãƒ¬ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã®é¸æŠ
-> **google cloud platform (GCP)** 
- Geminiãªã©ã®å„ç¨®googleã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹éš›ã«ç›¸æ€§ãŒè‰¯ã„
- ç„¡æ–™æ ãŒã‚ã‚‹
- ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ãŒå®¹æ˜“ã‹ã¤ã‚¹ãƒšãƒƒã‚¯ã®ç¨®é¡ãŒè±Šå¯Œ

# 2.ã‚µãƒ¼ãƒæ§‹ç¯‰
## SSHæ¥ç¶š
- GCPã®Compute Engineã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
- SSHã§æ¥ç¶š

### ã“ã“ã§ã€ç›´é¢ã—ãŸã‚¨ãƒ©ãƒ¼ã‚’ç´¹ä»‹
Windowsã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰SSHæ¥ç¶šã‚’è©¦ã¿ãŸéš›ã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
```bash
> ssh -i ~/.ssh/rsa user@ip_address
user@ip_address: Permission denied (publickey).
```
ã“ã®æ™‚ã€åŸå› ã¯ãƒ¦ãƒ¼ã‚¶ã®PIDã®ä¸æ•´åˆã§ã‚ã£ãŸã€‚  
GCPã®Compute Engineã«å…¬é–‹éµã‚’ç™»éŒ²ã—ãŸéš›ã«ã€ãƒ¦ãƒ¼ã‚¶åãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ã€äº‹å‰ã«æ‰‹å‹•ã§ä½œæˆã—ãŸãƒ¦ãƒ¼ã‚¶ã¨PIDãŒç•°ãªã£ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹ã€‚  
ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã§ä»¥ä¸‹ã®æ§˜ã«å‹•ä½œã—ãŸéš›ã¯ã€ä»Šå›ã®ã‚¨ãƒ©ãƒ¼ã®ã‚±ãƒ¼ã‚¹ã§ã‚ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã€‚
```bash
user@servername:~$ ll
...
drwx------ 2 1013 user user 4096 Feb 9 04:32 .ssh/
...
user@servername:~$ cd .ssh
bash: cd: .ssh: Permission denied
user@servername:~$ id user
uid=1012(user) gid=1013(user) groups=1013(user) ...
```
ã“ã®æ™‚ã€.sshãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ‰€æœ‰è€…ãŒPID:1012ã®userãƒ¦ãƒ¼ã‚¶ã§ã¯ãªãã€PID:1013ã®userã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚  
ã“ã®å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¯¾å‡¦ã™ã‚‹ã€‚
```bash
user@servername:~$ sudo chown -R user:user .
user@servername:~$ ll
...
drwx------ 2 user user 4096 Feb 9 04:32 .ssh/
...
user@servername:~$ cd .ssh
user@servername:~/.ssh$
```
ä»¥ä¸Šã®æµã‚Œã§SSHæ¥ç¶šãŒå¯èƒ½ã«ãªã‚‹ã€‚

# 3.è¦ä»¶å®šç¾©
å­¦ç¿’è£œåŠ©ç”¨Webã‚¢ãƒ—ãƒª **SIRISA** ã®è¦ä»¶å®šç¾©
- è¨€èª: Python
- ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: Django 4.2 LTS
- SQL: PostgreSQL
- Webã‚¨ãƒ³ã‚¸ãƒ³: Nginx
- ã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒ: Gunicorn
- éåŒæœŸã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼: Celery + Redis
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: Bootstrap 5 + htmx
- AIé€£æº: Gemini 2.0 Flash API
- ãƒ¡ãƒ¼ãƒ«é€ä¿¡: Gmail API (OAuth 2.0)
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: ã‚µãƒ¼ãƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
- æ©Ÿèƒ½ä¸€è¦§:
  - ãƒ¦ãƒ¼ã‚¶èªè¨¼ (ãƒ¡ãƒ¼ãƒ«èªè¨¼ä»˜ã)
  - è³ªå•æŠ•ç¨¿ (ã‚¿ã‚¤ãƒˆãƒ«ã€æ•™ç§‘ã€æœ¬æ–‡ã€ãƒ¡ãƒ‡ã‚£ã‚¢æ·»ä»˜)
  - å›ç­”æŠ•ç¨¿ (äººé–“/AIã€è‡ªå‹•ç”Ÿæˆã€æœ¬æ–‡ã€ãƒ¡ãƒ‡ã‚£ã‚¢æ·»ä»˜)
  - ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ (çµµæ–‡å­—ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³)
  - æŠ•ç¨¿ç·¨é›†ãƒ»å‰Šé™¤ (è«–ç†å‰Šé™¤ï¼‹æ“ä½œãƒ­ã‚°)
  - ä¸‹æ›¸ãè‡ªå‹•ä¿å­˜
  - æŠ•ç¨¿æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
  - è³ªå•ã¨å›ç­”ã®è¤‡æ•°ã®å½¢å¼ã§ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ (CSV, XLSX, PDF, Markdown, Text)
  - ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å¯¾å¿œ (ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³)
- é–‹ç™ºåŠ¹ç‡åŒ–: GitHub Copilot + ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³
# 4.ã‚¢ãƒ—ãƒªæ§‹ç¯‰
## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
![](../powerpoint/architecture.png)
*ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£*

## é–‹ç™ºå·¥ç¨‹

### 0: ã‚¤ãƒ³ãƒ•ãƒ©åŸºç›¤æ§‹ç¯‰
#### 0-1. ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- Python 3.12.3, PostgreSQL 16, Nginx, Redis, Git, pip, venv, libpq-dev, python3-dev ç­‰ã®ãƒ“ãƒ«ãƒ‰ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

#### 0-2. PostgreSQL ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ
- èªè¨¼æ–¹å¼ md5ã€ãƒ­ãƒ¼ã‚«ãƒ«æ¥ç¶šã®ã¿è¨±å¯

#### 0-3. Redis ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»è¨­å®š
apt install redis-server
ãƒã‚¤ãƒ³ãƒ‰ 127.0.0.1:6379ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰
Celeryã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã¨ã—ã¦ä½¿ç”¨

#### 0-4. Git ãƒªãƒã‚¸ãƒˆãƒªåˆæœŸåŒ–
 - /opt/sirisa/ ã« bare ãƒªãƒã‚¸ãƒˆãƒªä½œæˆï¼ˆå…±æœ‰ï¼‰
 - ãƒ¦ãƒ¼ã‚¶ nk ã¨ tr ã‚’ sirisa ã‚°ãƒ«ãƒ¼ãƒ—ã«è¿½åŠ ã—ã€ã‚°ãƒ«ãƒ¼ãƒ—æ¨©é™ã§å…±æœ‰
 - å„ãƒ¦ãƒ¼ã‚¶ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (/home/nk/sirisa/, /home/tr/sirisa/) ã«ã‚¯ãƒ­ãƒ¼ãƒ³
 - .gitignore: *.pyc, __pycache__/, media/, *.sqlite3, .env, venv/, credentials/
 - ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥: main(æœ¬ç•ª), develop(é–‹ç™º), feature/*(æ©Ÿèƒ½åˆ¥)
 - AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯å¤‰æ›´ã”ã¨ã«ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã« [AI] ãƒ—ãƒ¬ãƒ•ã‚£ã‚¯ã‚¹ï¼‰

#### 0-5. Pythonä»®æƒ³ç’°å¢ƒã¨ requirements.txt
- å…±æœ‰ä»®æƒ³ç’°å¢ƒ: /opt/sirisa/venv/
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸:
  - Django==4.2.*, gunicorn, psycopg2-binary
  - django-htmx, Pillow, markdown, bleach
  - google-api-python-client, google-auth-oauthlib (Gmail API)
  - google-generativeai (Gemini API)
  - celery, redis
  - openpyxl (XLSX), weasyprint (PDF)
  - django-cleanup, python-dotenv

#### 0-6. Nginx è¨­å®š (/etc/nginx/sites-available/sirisa)
- IPåˆ¶é™: allow 126.131.73.198; allow 222.147.11.198; deny all;
- ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·: proxy_pass http://127.0.0.1:8000;
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«: location /static/ â†’ /opt/sirisa/staticfiles/
- ãƒ¡ãƒ‡ã‚£ã‚¢: location /media/ â†’ /opt/sirisa/media/
- client_max_body_size 110M;
- server_name 34.28.25.207;ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ã¯ä¿ç•™ï¼‰

#### 0-7. Gunicorn systemdã‚µãƒ¼ãƒ“ã‚¹ (/etc/systemd/system/sirisa.service)
- ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°: 3
- ãƒãƒ¼ãƒˆ 8000 ã§Nginxã¨æ¥ç¶š

#### 0-8. Celeryãƒ¯ãƒ¼ã‚«ãƒ¼ systemdã‚µãƒ¼ãƒ“ã‚¹ (/etc/systemd/system/sirisa-celery.service)
- ExecStart=/opt/sirisa/venv/bin/celery -A sirisa_project worker --loglevel=info

#### 0-9. Gemini APIã‚­ãƒ¼å–å¾—æ‰‹é †
- Google AI Studio ã«ãƒ­ã‚°ã‚¤ãƒ³
- ã€ŒGet API keyã€â†’ã€ŒCreate API keyã€
- APIã‚­ãƒ¼ã‚’ .env ã« GEMINI_API_KEY=xxx ã¨ã—ã¦è¨˜è¼‰
- ç„¡æ–™æ : 15 RPM / 1500ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥ï¼ˆé«˜æ ¡Q&Aã«ã¯ååˆ†ï¼‰

### 1: Copilotã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³æ•´å‚™ & Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤
#### 1-1. .github/copilot-instructions.mdï¼ˆãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“ã®æŒ‡ç¤ºï¼‰
- ä»¥ä¸‹ã®å†…å®¹ã‚’è¨˜è¼‰:
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦: SIRISAã¯é«˜æ ¡ç”Ÿå‘ã‘å­¦ç¿’Q&Aãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚Django 4.2 LTS + PostgreSQL + Nginx + Gunicorn + Celery/Redisæ§‹æˆ
  - è¨€èª: Python 3.12.3ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯Django Template + htmxã€UIã¯Bootstrap 5
  - ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„:
    - æ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆå¿…é ˆï¼ˆdocstringå«ã‚€ï¼‰
    - PEP 8æº–æ‹ ã€è¡Œé•·120æ–‡å­—ä¸Šé™
    - Viewã¯ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ï¼ˆCBVï¼‰ã‚’å„ªå…ˆ
    - å…¨ãƒ¢ãƒ‡ãƒ«ã¯ SoftDeleteMixin ã‚’ç¶™æ‰¿ã—è«–ç†å‰Šé™¤ã‚’ä½¿ç”¨
    - ãƒ†ã‚¹ãƒˆã¯å„ã‚¢ãƒ—ãƒªã® tests/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®
  - ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆæ‰‹é †:
    - source /opt/sirisa/venv/bin/activate
    - cd /opt/sirisa/src && python manage.py test
    - python manage.py makemigrations && python manage.py migrate
    - python manage.py collectstatic --noinput
    - sudo systemctl restart sirisa sirisa-celery
  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ: ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ä¸€è¦§ï¼ˆå¾Œè¿°ï¼‰
  - Gité‹ç”¨: å¤‰æ›´ã”ã¨ã«ã‚³ãƒŸãƒƒãƒˆã€ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ—¥æœ¬èªã§ [AI] æ©Ÿèƒ½å: å¤‰æ›´å†…å®¹ ã®å½¢å¼
  - ç’°å¢ƒå¤‰æ•°: .env ãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã€‚SECRET_KEY, DATABASE_URL, GEMINI_API_KEY, GMAIL_CREDENTIALS_PATH ç­‰

#### 1-2. .github/instructions/django-models.instructions.md
- è¨˜è¼‰å†…å®¹:
```text
---applyTo: "**/models.py,**/models/**/*.py"---
å…¨ãƒ¢ãƒ‡ãƒ«ã¯ core.models.SoftDeleteMixin ã‚’ç¶™æ‰¿ã™ã‚‹ã“ã¨
objects = SoftDeleteManager() ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ã¨ã—ã¦è¨­å®š
å‰Šé™¤æ“ä½œã¯ soft_delete(user) ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã€DeletionLog ã‚’è‡ªå‹•è¨˜éŒ²
created_at, updated_at ã¯ TimeStampMixin ã§å…±é€šåŒ–
ForeignKeyã«ã¯ on_delete=models.PROTECT ã‚’åŸå‰‡ä½¿ç”¨ï¼ˆã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤é˜²æ­¢ï¼‰
__str__ ãƒ¡ã‚½ãƒƒãƒ‰ã¯å¿…ãšå®šç¾©
```

#### 1-3. .github/instructions/django-views.instructions.md
- è¨˜è¼‰å†…å®¹:
```text
---applyTo: "**/views.py,**/views/**/*.py"---
ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ï¼ˆCBVï¼‰ã‚’å„ªå…ˆä½¿ç”¨
èªè¨¼å¿…é ˆãƒšãƒ¼ã‚¸ã¯ LoginRequiredMixin ã‚’ç¶™æ‰¿
ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã¯æ—¥æœ¬èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§è¿”å´
htmxãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ django-htmx ã® request.htmx ã§åˆ¤å®šã—ã€éƒ¨åˆ†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¿”å´
ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¯åˆè¨ˆ100MBãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¿…ãšå®Ÿæ–½
ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯ messages.error() ã§ãƒ¦ãƒ¼ã‚¶é€šçŸ¥
```

#### 1-4. .github/instructions/django-templates.instructions.md
- è¨˜è¼‰å†…å®¹:
```text
---applyTo: "**/templates/**/*.html"---
å…¨ãƒšãƒ¼ã‚¸ã¯ base.html ã‚’ {% extends %} ã§ç¶™æ‰¿
Bootstrap 5ã®ã‚°ãƒªãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã§ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œå¿…é ˆ
htmxå±æ€§ï¼ˆhx-get, hx-post, hx-trigger, hx-target, hx-swapï¼‰ã‚’ä½¿ç”¨ã—ãŸå‹•çš„æ›´æ–°
{% csrf_token %} ã¯ã™ã¹ã¦ã®POSTãƒ•ã‚©ãƒ¼ãƒ ã«å¿…é ˆ
æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¯å¯ï¼ˆi18nä¸è¦ï¼‰
ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ table-responsive ã‚¯ãƒ©ã‚¹ã§ã‚¹ãƒãƒ›æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ
```

#### 1-5. .github/instructions/django-tests.instructions.md
- è¨˜è¼‰å†…å®¹:
```text
---applyTo: "**/tests.py,**/tests/**/*.py"---
django.test.TestCase ã‚’ç¶™æ‰¿
å„ãƒ“ãƒ¥ãƒ¼ã«å¯¾ã—ã¦æ­£å¸¸ç³»ãƒ»ç•°å¸¸ç³»ï¼ˆæœªèªè¨¼ã€æ¨©é™ä¸è¶³ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼‰ã‚’ãƒ†ã‚¹ãƒˆ
ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã§setUpã«ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ
APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ self.client.post() / self.client.get() ã§æ¤œè¨¼
è«–ç†å‰Šé™¤å¾Œã« objectsï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ï¼‰ã§å–å¾—ä¸å¯ã€all_with_deleted() ã§å–å¾—å¯èƒ½ã‚’æ¤œè¨¼
```

#### 1-6. .github/instructions/celery-tasks.instructions.md
- è¨˜è¼‰å†…å®¹:
```text
---applyTo: "**/tasks.py"---
@shared_task(bind=True) ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨
ãƒªãƒˆãƒ©ã‚¤è¨­å®š: max_retries=3, default_retry_delay=10
å¤–éƒ¨APIå‘¼ã³å‡ºã—ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 60ç§’
å…¨ã‚¿ã‚¹ã‚¯ã«ãƒ­ã‚®ãƒ³ã‚°å¿…é ˆï¼ˆlogging.getLogger(__name__)ï¼‰
ä¾‹å¤–ç™ºç”Ÿæ™‚ã¯ self.retry(exc=exc) ã§ãƒªãƒˆãƒ©ã‚¤ã€å…¨ãƒªãƒˆãƒ©ã‚¤å¤±æ•—æ™‚ã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
```

#### 1-7. .github/instructions/gemini-service.instructions.md
- è¨˜è¼‰å†…å®¹:
```text
---applyTo: "**/services/**/*.py"---
Gemini APIå‘¼ã³å‡ºã—ã¯ google.generativeai SDKã‚’ä½¿ç”¨
ãƒ¢ãƒ‡ãƒ«: gemini-2.0-flash
ãƒ¬ã‚¹ãƒãƒ³ã‚¹HTMLã¯ bleach ã§ã‚µãƒ‹ã‚¿ã‚¤ã‚ºå¿…é ˆ
æ•™ç§‘åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ prompts.py ã§ç®¡ç†ã—ã€ã‚µãƒ¼ãƒ“ã‚¹å±¤ã§çµ„ã¿ç«‹ã¦
APIã‚­ãƒ¼ã¯ settings.GEMINI_API_KEY ã‹ã‚‰å–å¾—ï¼ˆãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢ï¼‰
```

#### 1-8. Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- django-admin startproject sirisa_project /opt/sirisa/src/
- è¨­å®šåˆ†å‰²: settings/base.py, settings/development.py, settings/production.py

#### 1-9. åŸºæœ¬è¨­å®š (settings/base.py)
- LANGUAGE_CODE = 'ja', TIME_ZONE = 'Asia/Tokyo'
- AUTH_USER_MODEL = 'accounts.User'
- SESSION_COOKIE_AGE = 2592000ï¼ˆ30æ—¥é–“ï¼‰
- FILE_UPLOAD_MAX_MEMORY_SIZE = 115343360ï¼ˆ110MBï¼‰
- Celeryè¨­å®š: CELERY_BROKER_URL = 'redis://127.0.0.1:6379/0'

#### 1-10. å…±é€šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (templates/base.html)
- Bootstrap 5 CDN + htmx CDN
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ï¼ˆãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰
- ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã«å¿œã˜ãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºåˆ‡æ›¿
- ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢
- ãƒ•ãƒƒã‚¿ãƒ¼

#### 1-11. Celeryè¨­å®š (sirisa_project/celery.py)
- Celeryã‚¢ãƒ—ãƒªåˆæœŸåŒ–
- __init__.py ã§ celery_app ã‚’ãƒ­ãƒ¼ãƒ‰

### 2: å…±é€šæ©Ÿèƒ½ã‚¢ãƒ—ãƒª (core)
#### 2-1. è«–ç†å‰Šé™¤ãƒŸãƒƒã‚¯ã‚¹ã‚¤ãƒ³ (core/models.py)
- TimeStampMixin: created_at, updated_at
- SoftDeleteMixin: is_deleted, deleted_at + soft_delete(user) ãƒ¡ã‚½ãƒƒãƒ‰
- SoftDeleteManager: get_queryset().filter(is_deleted=False) ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
- all_with_deleted() ãƒ¡ã‚½ãƒƒãƒ‰ã§è«–ç†å‰Šé™¤æ¸ˆã¿ã‚‚å–å¾—å¯èƒ½

#### 2-2. å‰Šé™¤ãƒ­ã‚°ãƒ¢ãƒ‡ãƒ« (core/models.py)
- DeletionLog: user(FK), content_type(GenericForeignKey), object_id, description, deleted_at
- soft_delete() å†…ã§è‡ªå‹•ç”Ÿæˆ
- Django logging ã§ãƒ•ã‚¡ã‚¤ãƒ«(/var/log/sirisa/deletion.log)ã«ã‚‚å‡ºåŠ›

### 3: èªè¨¼ã‚¢ãƒ—ãƒª (accounts)
#### 3-1. ã‚«ã‚¹ã‚¿ãƒ Userãƒ¢ãƒ‡ãƒ« (accounts/models.py)
- AbstractUser ç¶™æ‰¿
- è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: role(student/teacher/ai_agent), is_verified, is_deleted, deleted_at
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„
- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚·ã‚¹ãƒ†ãƒ ãƒ¦ãƒ¼ã‚¶ã€ŒGeminiã€ã‚’è‡ªå‹•ä½œæˆ:
  - username="Gemini", role="ai_agent", set_unusable_password()

#### 3-2. ãƒ¡ãƒ¼ãƒ«èªè¨¼ãƒ¢ãƒ‡ãƒ« (accounts/models.py)
- EmailVerification: user(FK), code(6æ¡), created_at, expires_at(5åˆ†), is_used

#### 3-3. Gmail APIã‚µãƒ¼ãƒ“ã‚¹ (accounts/gmail_service.py)
- OAuth 2.0 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDä½¿ç”¨ï¼ˆryotatakahashi0123@gmail.comï¼‰
- èªè¨¼ã‚³ãƒ¼ãƒ‰ãƒ¡ãƒ¼ãƒ«é€ä¿¡é–¢æ•°ï¼ˆæ—¥æœ¬èªHTMLå½¢å¼ï¼‰
- credentials.json ã¯ .env çµŒç”±ã§ç®¡ç†

#### 3-4. ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ (/accounts/login/)
- ãƒ•ã‚©ãƒ¼ãƒ : ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
- ãƒœã‚¿ãƒ³: ã€Œãƒ­ã‚°ã‚¤ãƒ³ã€ã€Œæ–°è¦ç™»éŒ²ç”»é¢ã¸ã€
- èªè¨¼æˆåŠŸ â†’ ãƒ¡ãƒ¼ãƒ«èªè¨¼ã‚³ãƒ¼ãƒ‰å…¥åŠ›ç”»é¢ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãŒã‚¢ã‚¯ã‚»ã‚¹ â†’ ãƒ›ãƒ¼ãƒ ç”»é¢ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆè‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³ï¼‰

#### 3-5. æ–°è¦ç™»éŒ²ç”»é¢ (/accounts/register/)
- ãƒ•ã‚©ãƒ¼ãƒ : ãƒ¦ãƒ¼ã‚¶åã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèª
- ãƒœã‚¿ãƒ³: ã€Œæ–°è¦ç™»éŒ²ã€ã€Œãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸ã€
- ç™»éŒ²å¾Œ â†’ ãƒ¡ãƒ¼ãƒ«èªè¨¼ç”»é¢ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

#### 3-6. ãƒ¡ãƒ¼ãƒ«èªè¨¼ç”»é¢ (/accounts/verify/)
- 6æ¡ã‚³ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
- èªè¨¼æˆåŠŸ â†’ is_verified = True â†’ ãƒ›ãƒ¼ãƒ ç”»é¢ã¸
- å†é€ä¿¡ãƒœã‚¿ãƒ³ï¼ˆ60ç§’é–“éš”åˆ¶é™ï¼‰

### 4: è³ªå•ãƒ»å›ç­”ã‚¢ãƒ—ãƒª (questions)
#### 4-1. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« (questions/models.py)
| ãƒ¢ãƒ‡ãƒ« | ä¸»ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |
|:--|:--|
| Subject | name, is_custom, is_deleted |
| Question | user(FK), title, subject(FK), body, body_format(html/md/text), is_resolved, is_deleted, deleted_at, deleted_by, created_at, updated_at |
| QuestionMedia | question(FK), file, media_type(image/audio/video), file_size, is_deleted |
| Answer | question(FK), user(FK), body, body_format, is_ai_generated, ai_model(nullable), ai_generation_status(pending/completed/failed), is_deleted, deleted_at, deleted_by, created_at, updated_at |
| AnswerMedia | answer(FK), file, media_type, file_size, is_deleted |
| Reaction | answer(FK), user(FK), emoji_type(ğŸ‘/ğŸ‘/â¤ï¸/ğŸ‰/ğŸ’¡), created_at |
| QuestionDraft | user(FK), question(FK nullable), title, subject, body, body_format, auto_saved_at |
| AnswerDraft | user(FK), question(FK), answer(FK nullable), body, body_format, auto_saved_at |

#### 4-2. æ•™ç§‘ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆfixturesï¼‰
- å›½èªã€æ•°å­¦ã€è‹±èªã€ç‰©ç†ã€åŒ–å­¦ã€ç”Ÿç‰©ã€åœ°å­¦ã€æ—¥æœ¬å²ã€ä¸–ç•Œå²ã€åœ°ç†ã€æ”¿æ²»çµŒæ¸ˆã€å€«ç†ã€æƒ…å ±ã€ä¿å¥ä½“è‚²ã€éŸ³æ¥½ã€ç¾è¡“ã€å®¶åº­ç§‘ã€ãã®ä»–

#### 4-3. ãƒ›ãƒ¼ãƒ ç”»é¢ (/)
- ãƒœã‚¿ãƒ³: ã€Œè³ªå•ã‚’æŠ•ç¨¿ã™ã‚‹ã€ã€Œè‡ªåˆ†ã®æŠ•ç¨¿ä¸€è¦§ã€ã€Œè³ªå•ã‚’æ¢ã™ã€
- æœ€è¿‘ã®è³ªå•ã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çš„ã«æ•°ä»¶è¡¨ç¤º

#### 4-4. æŠ•ç¨¿ç”»é¢ (/questions/new/)
- ãƒ•ã‚©ãƒ¼ãƒ : ã‚¿ã‚¤ãƒˆãƒ«ã€æ•™ç§‘ï¼ˆãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ï¼‹ã€Œãã®ä»–ã€ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ï¼‰ã€æœ¬æ–‡ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé¸æŠ(HTML/MD/Text)ã€æœ¬æ–‡ã€ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆè¤‡æ•°/D&Då¯¾å¿œ/åˆè¨ˆ100MBåˆ¶é™ï¼‰
- è‡ªå‹•ä¿å­˜: htmxã§30ç§’ã”ã¨ã«POST
- æŠ•ç¨¿å®Œäº†å¾Œ â†’ generate_ai_answer.delay(question.id) ã‚’ç™ºè¡Œ
- ãƒœã‚¿ãƒ³: ã€ŒæŠ•ç¨¿ã™ã‚‹ã€ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€

#### 4-5. æŠ•ç¨¿ä¸€è¦§ç”»é¢ (/questions/my/)
- è‡ªåˆ†ã®æŠ•ç¨¿ä¸€è¦§ã€å„è³ªå•ã«ã€Œç·¨é›†ã€ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³
- å‰Šé™¤ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ç¢ºèª â†’ è«–ç†å‰Šé™¤ + DeletionLog

#### 4-6. æŠ•ç¨¿ç·¨é›†ç”»é¢ (/questions/<id>/edit/)
- æŠ•ç¨¿ç”»é¢ã¨åŒç­‰ã®ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆæ—¢å­˜å€¤ãƒ—ãƒªã‚»ãƒƒãƒˆï¼‰
- ãƒ¡ãƒ‡ã‚£ã‚¢ã®å·®ã—æ›¿ãˆï¼ˆå‰Šé™¤/è¿½åŠ ï¼‰
- ä¸‹æ›¸ãè‡ªå‹•ä¿å­˜
- ä»–è€…ã®å›ç­”ã®å‰Šé™¤æ©Ÿèƒ½ï¼ˆè³ªå•è€…ã®ã¿å¯èƒ½ã€è«–ç†å‰Šé™¤ï¼‹ãƒ­ã‚°ï¼‰
- ãƒœã‚¿ãƒ³: ã€Œæ›´æ–°ã€ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€

#### 4-7. è³ªå•ä¸€è¦§ãƒ»æ¤œç´¢ç”»é¢ (/questions/)
- ãƒ†ãƒ¼ãƒ–ãƒ«: è³ªå•ãƒ¦ãƒ¼ã‚¶ | è³ªå•æ—¥æ™‚ | è³ªå•ã‚¿ã‚¤ãƒˆãƒ« | ç§‘ç›®
- ã‚½ãƒ¼ãƒˆ: æ›´æ–°é †ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã€åå‰é †
- çµã‚Šè¾¼ã¿: ç§‘ç›®åˆ¥ã€ãƒ¦ãƒ¼ã‚¶åã€æœªè§£æ±ºã®ã¿
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ20ä»¶/ãƒšãƒ¼ã‚¸ï¼‰
- htmxã§éåŒæœŸãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

#### 4-8. è³ªå•è¡¨ç¤ºç”»é¢ (/questions/<id>/)
- è³ªå•æœ¬æ–‡: body_format ã«å¿œã˜ã¦æç”»ï¼ˆMDâ†’HTMLå¤‰æ›ã€HTMLã‚µãƒ‹ã‚¿ã‚¤ã‚ºã€Textâ†’æ”¹è¡Œä¿æŒï¼‰
- ãƒ¡ãƒ‡ã‚£ã‚¢: ç”»åƒã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã€éŸ³å£°/å‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
- å›ç­”ä¸€è¦§:
  - ã‚½ãƒ¼ãƒˆ: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è‰¯ã„é †ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
  - å„å›ç­”ã«5ç¨®çµµæ–‡å­—ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ï¼ˆhtmxãƒˆã‚°ãƒ«ï¼‰
  - é•·ã„å›ç­”ã¯200æ–‡å­—ã§æŠ˜ã‚ŠãŸãŸã¿ï¼‹å±•é–‹ãƒœã‚¿ãƒ³
  - body_format ã«å¿œã˜ãŸæç”»
  - AIå›ç­”ã®è¡¨ç¤º: ã€ŒğŸ¤– Geminiã€ãƒ©ãƒ™ãƒ« + ã€ŒAIç”Ÿæˆå›ç­”ã€ãƒãƒƒã‚¸ + èƒŒæ™¯è‰²åŒºåˆ¥
  - AIå›ç­” pending æ™‚: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ + htmx 5ç§’ãƒãƒ¼ãƒªãƒ³ã‚°ã€å®Œäº†ã§è‡ªå‹•è¡¨ç¤º
  - AIå›ç­” failed æ™‚: ã€ŒAIå›ç­”ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ•™å¸«ã‹ã‚‰ã®å›ç­”ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚ã€ã‚’è¡¨ç¤º
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³: CSV, XLSX, PDF, Markdown, TXTï¼ˆè¡¨ç¤ºå½¢å¼é¸æŠãƒ¢ãƒ¼ãƒ€ãƒ«ä»˜ãï¼‰
- ãƒœã‚¿ãƒ³: ã€Œå›ç­”ã™ã‚‹ã€ã€Œè³ªå•ä¸€è¦§ã«æˆ»ã‚‹ã€

#### 4-9. å›ç­”ç”»é¢ (/questions/<id>/answer/)
- ãƒ•ã‚©ãƒ¼ãƒ : æœ¬æ–‡ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé¸æŠã€æœ¬æ–‡ï¼‹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆ100MBï¼‰
- ä¸‹æ›¸ãè‡ªå‹•ä¿å­˜ï¼ˆ30ç§’ï¼‰
- ãƒœã‚¿ãƒ³: ã€Œå›ç­”ã™ã‚‹ã€ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€

### 5: Gemini AIè‡ªå‹•å›ç­”æ©Ÿèƒ½
#### 5-1. æ•™ç§‘åˆ¥ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ (questions/services/prompts.py)
- å…±é€šãƒ™ãƒ¼ã‚¹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:
  - ã€Œã‚ãªãŸã¯é«˜æ ¡ç”Ÿã®å­¦ç¿’ã‚’æ”¯æ´ã™ã‚‹æ•™å¸«AIã§ã™ã€‚è³ªå•ã«å¯¾ã—ã¦ã€ã‚ã‹ã‚Šã‚„ã™ãä¸å¯§ã«HTMLå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ã€‚æ•°å¼ãŒã‚ã‚‹å ´åˆã¯KaTeXè¨˜æ³•ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚å›ç­”ã¯â‘ è¦ç‚¹ã®ç°¡æ½”ãªèª¬æ˜ã€â‘¡è©³ç´°ãªè§£èª¬ã€â‘¢ã¾ã¨ã‚ã€ã®æ§‹æˆã§ä½œæˆã—ã¦ãã ã•ã„ã€‚ã€
- æ•™ç§‘åˆ¥è¿½åŠ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:
  - æ•°å­¦: è§£æ³•æ‰‹é †ã‚’ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«ã€è¨ˆç®—éç¨‹ã‚’å«ã‚ã¦æç¤ºã€‚å›³å½¢ã¯SVG/ASCII
  - è‹±èª: æ–‡æ³•è§£èª¬ã¯æ—¥æœ¬èªã€ä¾‹æ–‡3ã¤ä»¥ä¸Šã€ç™ºéŸ³è¨˜å·ä½µè¨˜
  - ç‰©ç†: å…¬å¼ã®å°å‡ºã€å˜ä½ã®æ‰±ã„æ˜ç¢ºåŒ–ã€å…·ä½“çš„æ•°å€¤ä¾‹
  - åŒ–å­¦: åŒ–å­¦åå¿œå¼ã®ä¿‚æ•°åˆã‚ã›ã€åˆ†å­ãƒ¬ãƒ™ãƒ«ã®åå¿œèª¬æ˜
  - ç”Ÿç‰©: ç”Ÿç‰©å­¦çš„ãƒ—ãƒ­ã‚»ã‚¹ã®æ®µéšèª¬æ˜ã€å°‚é–€ç”¨èªã®å®šç¾©ä½µè¨˜
  - æ—¥æœ¬å²/ä¸–ç•Œå²: æ™‚ä»£èƒŒæ™¯ã€å› æœé–¢ä¿‚ã€å¹´å·ã®æ™‚ç³»åˆ—æ•´ç†
  - å›½èª: èª­è§£ãƒã‚¤ãƒ³ãƒˆã€ç­†è€…ã®æ„å›³ã€å¤æ–‡ã¯ç¾ä»£èªè¨³ä»˜ã
  - ãã®ä»–: å…±é€šãƒ™ãƒ¼ã‚¹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã¿

#### 5-2. Geminiã‚µãƒ¼ãƒ“ã‚¹ (questions/services/gemini_service.py)
- google.generativeai SDKä½¿ç”¨
- generate_answer(question_title, question_body, subject_name, body_format) é–¢æ•°
- HTMLå½¢å¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ bleach ã§ã‚µãƒ‹ã‚¿ã‚¤ã‚º
- è¨±å¯ã‚¿ã‚°: p, h1-h6, ul, ol, li, strong, em, code, pre, table, tr, td, th, thead, tbody, br, hr, blockquote, span, div, a, sup, sub
- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ60ç§’

#### 5-3. éåŒæœŸã‚¿ã‚¹ã‚¯ (questions/tasks.py)
- generate_ai_answer(self, question_id): @shared_task(bind=True, max_retries=3, default_retry_delay=10)
- ãƒ•ãƒ­ãƒ¼:
  - Question å–å¾— â†’ Geminiãƒ¦ãƒ¼ã‚¶å–å¾—
  - Answer ã‚’ ai_generation_status="pending", is_ai_generated=True, body_format="html" ã§ä»®ä½œæˆ
  - gemini_service.generate_answer() å‘¼ã³å‡ºã—
  - æˆåŠŸ â†’ Answer.body ã«ä¿å­˜ã€status="completed"
  - å¤±æ•— â†’ Celeryãƒªãƒˆãƒ©ã‚¤ã€å…¨ãƒªãƒˆãƒ©ã‚¤å¤±æ•— â†’ status="failed" + ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

#### 5-4. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèªAPI (/api/answers/<id>/status/)
- htmxãƒãƒ¼ãƒªãƒ³ã‚°ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- completed ã®å ´åˆã¯å›ç­”HTMLæœ¬ä½“ã‚’å«ã‚€éƒ¨åˆ†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¿”å´ï¼ˆãƒãƒ¼ãƒªãƒ³ã‚°åœæ­¢ï¼‰

### 6: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ (questions/export.py)
- CSV: csv ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€è³ªå•+å›ç­”ã‚’ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼
- XLSX: openpyxlã€è³ªå•ã‚·ãƒ¼ãƒˆ+å›ç­”ã‚·ãƒ¼ãƒˆ
- PDF: weasyprintã€HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰PDFå¤‰æ›
- Markdown: è³ªå•ãƒ»å›ç­”ã‚’MDå½¢å¼å‡ºåŠ›
- TXT: ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›
- å…¨å½¢å¼ã§è³ªå•ã®è¡¨ç¤ºå½¢å¼ï¼ˆHTML/MD/Textï¼‰ã‚’é¸æŠå¯èƒ½

### 7: ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å¯¾å¿œ
- Bootstrap 5 ã‚°ãƒªãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ  + ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆæ´»ç”¨
- ãƒ†ãƒ¼ãƒ–ãƒ«: table-responsive ã§æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: ãƒ¢ãƒã‚¤ãƒ«ã‚«ãƒ¡ãƒ©å¯¾å¿œ (accept="image/*,video/*,audio/*")
- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³: ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- ã‚¿ãƒƒãƒæ“ä½œ: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®ã‚¿ãƒƒãƒ—é ˜åŸŸç¢ºä¿ï¼ˆ44pxä»¥ä¸Šï¼‰

### 8: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨
#### 8-1. productionè¨­å®š
- DEBUG = False, ALLOWED_HOSTS = ['34.28.25.207']
- SECRET_KEY ã¯ç’°å¢ƒå¤‰æ•°
- python manage.py collectstatic

#### 8-2. ãƒ­ã‚°è¨­å®š
- Django â†’ /var/log/sirisa/django.log
- å‰Šé™¤æ“ä½œ â†’ /var/log/sirisa/deletion.log
- Celery â†’ /var/log/sirisa/celery.log
- Nginx â†’ /var/log/nginx/sirisa_access.log, sirisa_error.log

#### 8-3. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- PostgreSQL: cronã§æ—¥æ¬¡ pg_dump

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆå®Œå…¨ç‰ˆï¼‰
```text
/opt/sirisa/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ .github/
â”‚   â”‚   â”œâ”€â”€ copilot-instructions.md                # ãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“ã®æŒ‡ç¤º
â”‚   â”‚   â””â”€â”€ instructions/
â”‚   â”‚       â”œâ”€â”€ django-models.instructions.md      # models.py å‘ã‘æŒ‡ç¤º
â”‚   â”‚       â”œâ”€â”€ django-views.instructions.md       # views.py å‘ã‘æŒ‡ç¤º
â”‚   â”‚       â”œâ”€â”€ django-templates.instructions.md   # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‘ã‘æŒ‡ç¤º
â”‚   â”‚       â”œâ”€â”€ django-tests.instructions.md       # ãƒ†ã‚¹ãƒˆå‘ã‘æŒ‡ç¤º
â”‚   â”‚       â”œâ”€â”€ celery-tasks.instructions.md       # Celeryã‚¿ã‚¹ã‚¯å‘ã‘æŒ‡ç¤º
â”‚   â”‚       â””â”€â”€ gemini-service.instructions.md     # ã‚µãƒ¼ãƒ“ã‚¹å±¤å‘ã‘æŒ‡ç¤º
â”‚   â”œâ”€â”€ sirisa_project/
â”‚   â”‚   â”œâ”€â”€ __init__.py                            # celery_appãƒ­ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ celery.py                              # Celeryè¨­å®š
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”‚   â”œâ”€â”€ development.py
â”‚   â”‚   â”‚   â””â”€â”€ production.py
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â””â”€â”€ wsgi.py
â”‚   â”œâ”€â”€ core/                                      # å…±é€šæ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ models.py                              # SoftDeleteMixin, DeletionLog
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ accounts/                                  # èªè¨¼ã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ models.py                              # User, EmailVerification
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â”œâ”€â”€ gmail_service.py
â”‚   â”‚   â”œâ”€â”€ templates/accounts/
â”‚   â”‚   â”‚   â”œâ”€â”€ login.html
â”‚   â”‚   â”‚   â”œâ”€â”€ register.html
â”‚   â”‚   â”‚   â””â”€â”€ verify.html
â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”œâ”€â”€ questions/                                 # è³ªå•ãƒ»å›ç­”ã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â”œâ”€â”€ tasks.py                               # CeleryéåŒæœŸã‚¿ã‚¹ã‚¯
â”‚   â”‚   â”œâ”€â”€ export.py                              # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ gemini_service.py                  # Gemini APIå‘¼ã³å‡ºã—
â”‚   â”‚   â”‚   â””â”€â”€ prompts.py                         # æ•™ç§‘åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
â”‚   â”‚   â”œâ”€â”€ fixtures/
â”‚   â”‚   â”‚   â””â”€â”€ subjects.json                      # æ•™ç§‘ãƒã‚¹ã‚¿
â”‚   â”‚   â”œâ”€â”€ templates/questions/
â”‚   â”‚   â”‚   â”œâ”€â”€ home.html
â”‚   â”‚   â”‚   â”œâ”€â”€ create.html
â”‚   â”‚   â”‚   â”œâ”€â”€ my_list.html
â”‚   â”‚   â”‚   â”œâ”€â”€ edit.html
â”‚   â”‚   â”‚   â”œâ”€â”€ list.html
â”‚   â”‚   â”‚   â”œâ”€â”€ detail.html
â”‚   â”‚   â”‚   â”œâ”€â”€ answer.html
â”‚   â”‚   â”‚   â””â”€â”€ partials/                          # htmxéƒ¨åˆ†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â”‚       â”œâ”€â”€ question_list.html
â”‚   â”‚   â”‚       â”œâ”€â”€ answer_card.html
â”‚   â”‚   â”‚       â”œâ”€â”€ ai_answer_loading.html
â”‚   â”‚   â”‚       â””â”€â”€ reaction_buttons.html
â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ base.html
â”‚   â”‚   â”œâ”€â”€ 404.html
â”‚   â”‚   â””â”€â”€ 500.html
â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ img/
â”‚   â”œâ”€â”€ manage.py
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ venv/
â”œâ”€â”€ media/
â”œâ”€â”€ staticfiles/
â”œâ”€â”€ logs/
â”œâ”€â”€ credentials/                                  # Gmail APIèªè¨¼æƒ…å ±
â””â”€â”€ .env
```

## URLä¸€è¦§ï¼ˆå®Œå…¨ç‰ˆï¼‰
| URL | ãƒ“ãƒ¥ãƒ¼ | èª¬æ˜ |
|:--|:--|:--|
| /accounts/login/ | LoginView | ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ |
| /accounts/register/ | RegisterView | æ–°è¦ç™»éŒ²ç”»é¢ |
| /accounts/verify/ | VerifyEmailView | ãƒ¡ãƒ¼ãƒ«èªè¨¼ç”»é¢ |
| /accounts/logout/ | LogoutView | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ |
| / | HomeView | ãƒ›ãƒ¼ãƒ ç”»é¢ |
| /questions/new/ | QuestionCreateView | æŠ•ç¨¿ç”»é¢ |
| /questions/my/ | MyQuestionListView | æŠ•ç¨¿ä¸€è¦§ç”»é¢ |
| /questions/<id>/edit/ | QuestionEditView | æŠ•ç¨¿ç·¨é›†ç”»é¢ |
| /questions/<id>/delete/ | QuestionDeleteView | è³ªå•å‰Šé™¤(POST) |
| /questions/ | QuestionListView | è³ªå•ä¸€è¦§ãƒ»æ¤œç´¢ç”»é¢ |
| /questions/<id>/ | QuestionDetailView | è³ªå•è¡¨ç¤ºç”»é¢ |
| /questions/<id>/answer/ | AnswerCreateView | å›ç­”ç”»é¢ |
| /questions/<id>/export/ | QuestionExportView | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ |
| /api/drafts/question/ | QuestionDraftAPI | è³ªå•ä¸‹æ›¸ãè‡ªå‹•ä¿å­˜ |
| /api/drafts/answer/ | AnswerDraftAPI | å›ç­”ä¸‹æ›¸ãè‡ªå‹•ä¿å­˜ |
| /api/reactions/ | ReactionToggleAPI | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆ‡æ›¿ |
| /api/answers/<id>/status/ | AnswerStatusAPI | AIå›ç­”ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª |

## è³ªå•æŠ•ç¨¿ã€œAIå›ç­”è¡¨ç¤ºãƒ•ãƒ­ãƒ¼
```text
[è³ªå•è€…] â†’ è³ªå•æŠ•ç¨¿
    â†“ [Django View] â†’ Questionä¿å­˜ â†’ Celeryã‚¿ã‚¹ã‚¯ç™ºè¡Œ â†’ è³ªå•è¡¨ç¤ºç”»é¢ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
        â†“                           â†“
    [Celery Worker]            [ãƒ–ãƒ©ã‚¦ã‚¶] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
        â†“                           â†“ (htmx 5ç§’ãƒãƒ¼ãƒªãƒ³ã‚°)
   Gemini APIå‘¼ã³å‡ºã—
        â†“
   status=completedæ¤œçŸ¥
        â†“
   HTMLå›ç­”å–å¾—+ã‚µãƒ‹ã‚¿ã‚¤ã‚º
        â†“
   AIå›ç­”ãŒHTMLã§æç”»
        â†“
   Answeræ›´æ–°(completed) â†’ ãƒãƒ¼ãƒªãƒ³ã‚°åœæ­¢
```

## æ¤œè¨¼
### è‡ªå‹•ãƒ†ã‚¹ãƒˆ
- python manage.py test ã§å…¨ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- ãƒ†ã‚¹ãƒˆé …ç›®: ãƒ¦ãƒ¼ã‚¶ç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³ã€2FAèªè¨¼ã€è³ªå•CRUDã€å›ç­”CRUDã€AIå›ç­”ç”Ÿæˆã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå„å½¢å¼ã€è«–ç†å‰Šé™¤+ãƒ­ã‚°ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™

### Gemini AIå›ç­”ãƒ†ã‚¹ãƒˆ
- è³ªå•æŠ•ç¨¿å¾Œ5ã€œ15ç§’ä»¥å†…ã«AIå›ç­”ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
- å›ç­”è€…ãŒã€ŒğŸ¤– Geminiã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
- AIå›ç­”HTMLãŒæ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆXSSç„¡ã—ï¼‰
- APIå¤±æ•—æ™‚ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- python manage.py shell â†’ generate_ai_answer.delay(1) ã§æ‰‹å‹•ç¢ºèª

### ã‚¤ãƒ³ãƒ•ãƒ©ç¢ºèª
- IPåˆ¶é™: è¨±å¯IPä»¥å¤–ã‹ã‚‰ã®æ¥ç¶šæ‹’å¦
- systemctl status sirisa sirisa-celery ã§ç¨¼åƒç¢ºèª
- redis-cli ping â†’ PONG
- curl -I http://34.28.25.207 ã§Nginxãƒ¬ã‚¹ãƒãƒ³ã‚¹ç¢ºèª

### ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ç¢ºèª
- Chrome DevToolsãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§ä¸»è¦ç”»é¢ç¢ºèª

### Copilotã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª
- .github/copilot-instructions.md ãŒCopilot Chat ã® References ã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
- ãƒ‘ã‚¹åˆ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãŒå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†æ™‚ã«é©ç”¨ã•ã‚Œã‚‹ã“ã¨

## Decisions
| æ±ºå®šäº‹é … | é¸æŠ | ç†ç”± |
|:--|:--|:--|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Django 4.2 LTS | èªè¨¼/ORM/ç®¡ç†ç”»é¢ãŒçµ„ã¿è¾¼ã¿æ¸ˆã¿ |
| DB | PostgreSQL | å …ç‰¢æ€§ã€å…¨æ–‡æ¤œç´¢å¯èƒ½ã€Djangoæ¨å¥¨ |
| ãƒ¡ãƒ¼ãƒ« | Gmail API | ã‚¹ãƒ‘ãƒ ãƒªã‚¹ã‚¯å›é¿ã€é‹ç”¨ã‚³ã‚¹ãƒˆä½ |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | Django Template + htmx + Bootstrap 5 | SPAä¸è¦ã§ã‚¹ãƒãƒ›å¯¾å¿œãƒ»å‹•çš„æ›´æ–°ã‚’å®Ÿç¾ |
| WSGI | Gunicorn | Djangoè¦ªå’Œæ€§ |
| éåŒæœŸå‡¦ç† | Celery + Redis | è³ªå•æŠ•ç¨¿ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’é…å»¶ã•ã›ãªã„ |
| AIãƒ¢ãƒ‡ãƒ« | Gemini 2.0 Flash | é«˜é€Ÿãƒ»ä½ã‚³ã‚¹ãƒˆãƒ»ç„¡æ–™æ ã§ååˆ† |
| AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ | æ•™ç§‘åˆ¥æœ€é©åŒ– | å›ç­”å“è³ªã‚’æ•™ç§‘ç‰¹æ€§ã«åˆã‚ã›ã‚‹ |
| AIå›ç­”è¡¨ç¤º | ãƒãƒƒã‚¸+èƒŒæ™¯è‰²ã§äººé–“ã¨åŒºåˆ¥ | UXã®æ˜ç¢ºæ€§ |
| ãƒãƒ¼ãƒªãƒ³ã‚° | htmx every 5s | WebSocketã‚ˆã‚Šå®Ÿè£…ã‚·ãƒ³ãƒ—ãƒ« |
| è«–ç†å‰Šé™¤ | ãƒŸãƒƒã‚¯ã‚¹ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ | å…¨ãƒ¢ãƒ‡ãƒ«ã§ä¸€è²«å®Ÿè£… |
| è‡ªå‹•ä¿å­˜ | htmx 30ç§’POST | WebSocketä¸è¦ã§ã‚·ãƒ³ãƒ—ãƒ« |
| HTMLã‚µãƒ‹ã‚¿ã‚¤ã‚º | bleach | XSSå¯¾ç­–å¿…é ˆ |
| å…±æœ‰é–‹ç™º | /opt/sirisa/ å…±æœ‰ã€å„HOMEã«ã‚¯ãƒ­ãƒ¼ãƒ³ | nk/trä¸¡ãƒ¦ãƒ¼ã‚¶ãŒç‹¬ç«‹ä½œæ¥­å¯èƒ½ |
| CopilotæŒ‡ç¤º | copilot-instructions.md + ãƒ‘ã‚¹åˆ¥instructions | AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä¸€è²«ã—ãŸã‚³ãƒ¼ãƒ‰å“è³ªã‚’ç¶­æŒ |

# 5.ãƒ†ã‚¹ãƒˆ
## åˆå›èµ·å‹•
![](./images/20260902/init.png)
*åˆå›èµ·å‹•ç”»é¢*

åˆå›èµ·å‹•æ™‚ã«ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤º  
-> è¦æ±‚é€šã‚Š

## ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ç”»é¢é·ç§»
![](./images/20260902/regi.png)
*ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ç”»é¢*

åˆå›èµ·å‹•ç”»é¢ã«ãŠã„ã¦ã€"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹ã¯ã“ã¡ã‚‰"ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ç”»é¢ã«é·ç§»  
-> è¦æ±‚é€šã‚Š

![](./images/20260902/regi_error.png)
*ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ã‚¨ãƒ©ãƒ¼ç”»é¢*



![](./images/20260902/after_login.png)
*ãƒ›ãƒ¼ãƒ ç”»é¢*

2æ®µéšèªè¨¼å¾Œã¯è‡ªå‹•ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒ›ãƒ¼ãƒ ç”»é¢ã«é·ç§»ã™ã‚‹ã€‚